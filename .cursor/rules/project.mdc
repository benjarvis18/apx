---
alwaysApply: true
---


Rules:
- **Python:** Always use `uv` (never `pip`)
- when running python commands use `uv run python` instead of `python`
- after any change run `just check` to check for errors
- always keep the imports at the top of the file
- after doing a change, make sure there is no logical duplicates in the code. If there are, remove the duplicates or refactor the code to avoid the duplicates.
- prefer using pydantic models for data validation and serialization. Keep a single file with all the models for the project.
- be explicit with the types and type hints.
- when reaching out to an API or performing any external calls, consider potential errors and handle them gracefully.
- avoid using same constant multiple times, e.g. instead each function definition. 
- prefer passing pydantic models instead of multiple arguments to functions.
- prefer using enums if there are a limited number of values or a set of defined strings.
- most of the logic could be placed in the following way:
  - if it's something that purely depends on the model, make it a property of the model
  - if it's something that transforms one model into another, make it a stateless function
- prefer using stateless functions for logic that doesn't depend on the state.
- if stateful logic is needed, make sure state is a set of pydantic models (or a single pydantic model)